<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Engage Community - LoanHero</title>
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <link href="assets/css/main.css" rel="stylesheet" />
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#6605c7",
                        "background-light": "#f7f5f8",
                        "background-dark": "#190f23",
                        "gold-accent": "#e0c389",
                    },
                    fontFamily: {
                        "display": ["'Noto Serif'", "serif"],
                        "sans": ["'Noto Sans'", "sans-serif"],
                    }
                },
            },
        };
    </script>
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark min-h-screen font-sans transition-colors duration-500 text-gray-900 dark:text-gray-100 relative">

    <!-- Background -->
    <!-- Background -->
    <div class="fixed inset-0 z-0 bg-background-light dark:bg-background-dark pointer-events-none overflow-hidden">
        <div class="absolute inset-0 bg-mesh-gradient opacity-90"></div>
        <div class="absolute inset-0 opacity-30 mix-blend-overlay"
            style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCSQJcRexkqlKu3kzwZCWIGdx9mSdhvK4Je6lxA9kVrWHQFg-ShCu6j3XLipgBh0waP45VYm3rBVD2Psy-FTMp2qLU946EXQwD2sIGZJLe5tw2ugWPYnnOTMWoTGM95X4u1epiDmYaEV_vVdH7tyv2ZlDuFjSMZlzWulHW3UyesMipUWi30MryHEiz-_Lje83ApXK-FpMUQdIEWe0M_ZFfiu3BcH1_opus8b5qOTiMh8tMBAX7ifzSLR_qpWnWtdB8obUzknDxLtfeP');">
        </div>
    </div>

    <!-- Navigation -->
    <div id="navbar-placeholder"></div>

    <main class="relative z-10 pt-32 pb-24">
        <div class="max-w-7xl mx-auto px-6">
            <div class="mb-8">
                <span id="topicBadge"
                    class="inline-block px-4 py-2 rounded-full bg-primary/10 text-primary text-[10px] font-bold uppercase tracking-[0.2em] mb-4">Topic</span>
                <h1 id="topicTitle"
                    class="text-3xl md:text-5xl font-bold font-display text-gray-900 dark:text-white capitalize">Loading
                    Topic...</h1>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <!-- Main Feed -->
                <div class="lg:col-span-8 space-y-6">

                    <!-- Sort & Filter -->
                    <div class="glass-card p-4 rounded-2xl flex justify-between items-center">
                        <h2 class="font-bold text-lg text-gray-800 dark:text-white flex items-center gap-2">
                            <span class="material-symbols-outlined text-primary">forum</span>
                            Discussions
                        </h2>
                        <div class="flex items-center gap-4">
                            <div class="flex items-center gap-2">
                                <span class="material-symbols-outlined text-gray-500 text-sm">sort</span>
                                <span class="text-xs font-bold text-gray-500 uppercase tracking-wider">Sort:</span>
                            </div>
                            <select
                                class="bg-transparent text-sm font-bold text-primary border-none focus:ring-0 cursor-pointer p-0">
                                <option>Latest</option>
                                <option>Most Liked</option>
                                <option>Most Discussed</option>
                            </select>
                        </div>
                    </div>

                    <!-- Create Post Box -->
                    <div class="glass-card p-6 rounded-3xl border-primary/20 shadow-lg">
                        <div class="flex gap-4">
                            <div
                                class="w-12 h-12 rounded-full bg-zinc-200 dark:bg-zinc-800 flex items-center justify-center text-zinc-500">
                                <span class="material-symbols-outlined">person</span>
                            </div>
                            <div class="flex-1">
                                <textarea placeholder="Share your thoughts or ask a question..."
                                    class="w-full bg-zinc-100/50 dark:bg-zinc-900/50 border-none rounded-2xl p-4 text-sm focus:ring-1 focus:ring-primary outline-none transition-all dark:text-white min-h-[100px]"></textarea>
                                <div class="flex justify-between items-center mt-4">
                                    <div class="flex gap-2">
                                        <button
                                            class="p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-gray-500 transition-colors">
                                            <span class="material-symbols-outlined text-xl">image</span>
                                        </button>
                                        <button
                                            class="p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-gray-500 transition-colors">
                                            <span class="material-symbols-outlined text-xl">link</span>
                                        </button>
                                    </div>
                                    <button
                                        class="px-8 py-2.5 bg-primary text-white rounded-full text-xs font-bold uppercase tracking-widest hover:scale-105 active:scale-95 transition-all shadow-lg shadow-primary/20">Post</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Featured "Ask Mentor" Post - Topic Specific -->
                    <div id="mentorPost"
                        class="glass-card p-8 rounded-3xl border-2 border-primary/30 bg-gradient-to-br from-primary/5 to-purple-500/5 shadow-xl">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="material-symbols-outlined text-3xl text-primary">verified</span>
                            <div class="flex items-center gap-2">
                                <span class="text-xs font-bold uppercase tracking-[0.2em] text-primary">Featured</span>
                                <span class="text-xs font-bold uppercase tracking-[0.2em] text-gray-400">â€¢</span>
                                <span class="text-xs font-bold uppercase tracking-[0.2em] text-amber-600">Mentor Only
                                    Replies</span>
                            </div>
                        </div>

                        <div class="flex items-start justify-between mb-6">
                            <div class="flex gap-4">
                                <div
                                    class="w-14 h-14 rounded-full bg-gradient-to-br from-primary to-purple-600 flex items-center justify-center text-white font-bold text-xl shadow-lg">
                                    ðŸŽ“
                                </div>
                                <div>
                                    <div class="flex items-center gap-2">
                                        <h4 class="font-bold text-gray-900 dark:text-white text-lg">LoanHero Mentor Team
                                        </h4>
                                        <span class="material-symbols-outlined text-primary text-lg"
                                            title="Verified Mentor">verified</span>
                                    </div>
                                    <p class="text-xs text-gray-500">Official Mentor Post â€¢ Mentor-Only Replies</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 p-4 rounded-lg mb-6">
                            <div class="flex items-start gap-3">
                                <span class="material-symbols-outlined text-amber-600">info</span>
                                <div>
                                    <h4 class="font-bold text-amber-900 dark:text-amber-200 mb-1 text-sm">Ask Our
                                        Mentors
                                    </h4>
                                    <p class="text-xs text-amber-800 dark:text-amber-300" id="mentorAdvice">Our verified
                                        mentors and alumni are here to help you navigate this topic.</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white/80 dark:bg-gray-800/80 rounded-2xl p-6 mb-6">
                            <h3 class="font-bold text-lg text-gray-900 dark:text-white mb-4" id="mentorQuestion">What
                                questions do you have about this topic?</h3>
                            <p class="text-gray-700 dark:text-gray-300 leading-relaxed text-sm" id="mentorDescription">
                                Drop your questions below, and our verified mentors will provide expert guidance based
                                on
                                real experiences.
                            </p>
                        </div>

                        <div class="flex items-center gap-6 pt-6 border-t border-gray-200 dark:border-white/10">
                            <button onclick="showMentorInfo()"
                                class="flex items-center gap-2 text-sm font-bold text-primary hover:text-purple-600 transition-colors">
                                <span class="material-symbols-outlined text-lg">forum</span>
                                <span id="mentorReplyCount">Ask a Mentor</span>
                            </button>
                            <button class="flex items-center gap-2 text-sm font-bold text-gray-500">
                                <span class="material-symbols-outlined text-lg">people</span>
                                <span id="activeMentors">24 Active Mentors</span>
                            </button>
                            <button
                                class="flex items-center gap-2 text-sm font-bold text-gray-500 hover:text-primary transition-colors">
                                <span class="material-symbols-outlined text-lg">bookmark</span> Save
                            </button>
                        </div>
                    </div>

                    <!-- Discussion Posts -->
                    <div id="postsContainer" class="space-y-6">
                        <!-- Posts will be loaded here -->
                        <div class="text-center py-12">
                            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
                            <p class="mt-2 text-gray-500">Loading discussions...</p>
                        </div>
                    </div>
                </div>

                <!-- Right Sidebar -->
                <div class="lg:col-span-4 space-y-6">
                    <!-- Trending Now -->
                    <div class="glass-card p-6 rounded-3xl">
                        <div class="flex items-center gap-2 mb-4">
                            <span class="material-symbols-outlined text-primary">trending_up</span>
                            <h3 class="font-bold text-sm uppercase tracking-wider text-gray-900 dark:text-white">
                                Trending
                                Now</h3>
                        </div>
                        <div class="flex flex-wrap gap-2">
                            <span
                                class="px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-bold cursor-pointer hover:bg-primary hover:text-white transition-all">#SBILoans</span>
                            <span
                                class="px-3 py-1 rounded-full bg-blue-500/10 text-blue-600 text-xs font-bold cursor-pointer hover:bg-blue-500 hover:text-white transition-all">#UKVisa</span>
                            <span
                                class="px-3 py-1 rounded-full bg-green-500/10 text-green-600 text-xs font-bold cursor-pointer hover:bg-green-500 hover:text-white transition-all">#InterestRates</span>
                            <span
                                class="px-3 py-1 rounded-full bg-orange-500/10 text-orange-600 text-xs font-bold cursor-pointer hover:bg-orange-500 hover:text-white transition-all">#Scholarships</span>
                        </div>
                    </div>

                    <!-- Resources Widget -->
                    <div id="topicResourcesWidget" class="hidden glass-card p-6 rounded-3xl">
                        <h3 class="font-bold text-lg mb-4 text-gray-900 dark:text-white flex items-center gap-2">
                            <span class="material-symbols-outlined text-pink-500">inventory_2</span>
                            Helpful Resources
                        </h3>
                        <div id="resourcesList" class="space-y-4">
                            <!-- Populated by JS -->
                        </div>
                        <a href="community-resources.html"
                            class="block mt-4 text-center text-xs font-bold text-primary uppercase tracking-widest hover:underline">View
                            All Resources</a>
                    </div>

                    <!-- Events Widget -->
                    <div id="topicEventsWidget" class="hidden glass-card p-6 rounded-3xl">
                        <h3 class="font-bold text-lg mb-4 text-gray-900 dark:text-white flex items-center gap-2">
                            <span class="material-symbols-outlined text-orange-500">event</span>
                            Upcoming Events
                        </h3>
                        <div id="eventsList" class="space-y-4">
                            <!-- Populated by JS -->
                        </div>
                        <a href="community-events.html"
                            class="block mt-4 text-center text-xs font-bold text-primary uppercase tracking-widest hover:underline">Full
                            Calendar</a>
                    </div>

                    <!-- Mentors Widget -->
                    <div id="topicMentorsWidget" class="hidden glass-card p-6 rounded-3xl">
                        <h3 class="font-bold text-lg mb-4 text-gray-900 dark:text-white flex items-center gap-2">
                            <span class="material-symbols-outlined text-indigo-500">groups</span>
                            Top Mentors
                        </h3>
                        <div id="mentorsList" class="space-y-4">
                            <!-- Populated by JS -->
                        </div>
                        <a href="community-mentorship.html"
                            class="block mt-4 text-center text-xs font-bold text-primary uppercase tracking-widest hover:underline">Find
                            a Mentor</a>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script>
        // Interaction Scripts
        document.addEventListener('DOMContentLoaded', () => {
            // Randomize active counts slightly to look live
            document.querySelectorAll('.active-count').forEach(el => {
                let count = parseInt(el.dataset.baseCount);
                let fluctuation = Math.floor(Math.random() * 15) - 5; // +/- 5
                el.innerText = (count + fluctuation).toLocaleString() + " Active";
            });

            // Like Button Logic
            const buttons = document.querySelectorAll('button');
            buttons.forEach(btn => {
                if (btn.innerHTML.includes('arrow_upward') || btn.innerHTML.includes('favorite')) {
                    btn.addEventListener('click', function () {
                        const icon = this.querySelector('.material-symbols-outlined');
                        const text = this.innerText.split(' '); // ["arrow_upward", "24"]
                        let count = parseInt(text[1] || text[0]);

                        if (this.classList.contains('text-primary')) {
                            // Unlike
                            this.classList.remove('text-primary');
                            this.classList.add('text-gray-500');
                            if (!isNaN(count)) this.innerHTML = `<span class="material-symbols-outlined text-lg">arrow_upward</span> ${count - 1} Likes`;
                        } else {
                            // Like
                            this.classList.remove('text-gray-500');
                            this.classList.add('text-primary');
                            if (!isNaN(count)) this.innerHTML = `<span class="material-symbols-outlined text-lg fill-current">arrow_upward</span> ${count + 1} Likes`;

                            // Optional: Add a subtle pop animation
                            this.style.transform = "scale(1.2)";
                            setTimeout(() => this.style.transform = "scale(1)", 200);
                        }
                    });
                }
            });

            // Dynamic Relative Time (simulated)
            const times = document.querySelectorAll('.post-time');
            times.forEach(t => {
                // Randomly set recent times for "freshness"
                const r = Math.random();
                if (r > 0.7) t.innerText = "Just now";
                else if (r > 0.4) t.innerText = Math.floor(Math.random() * 50 + 2) + " mins ago";
                else t.innerText = Math.floor(Math.random() * 10 + 1) + " hours ago";
            });
        });
    </script>
    <script>
        // Update mentor post based on topic
        function updateMentorPostForTopic() {
            const urlParams = new URLSearchParams(window.location.search);
            const topic = urlParams.get('topic') || 'general';

            const mentorContent = {
                'eligibility': {
                    title: 'Loan Eligibility & Finance',
                    question: 'What challenges are you facing with loan eligibility?',
                    description: 'Our mentor team includes bank relationship managers and students who successfully secured education loans. Ask us about credit scores, collateral requirements, or improving your eligibility.',
                    advice: 'Get expert guidance on loan eligibility, documentation, and approval strategies from those who've been through it.',
                    mentors: 18
                },
                'universities': {
                    title: 'University Selection',
                    question: 'Need help choosing the right university?',
                    description: 'Our mentors are alumni from top global universities. Ask about rankings, program quality, campus life, ROI, or specific university comparisons.',
                    advice: 'Connect with alumni from top universities worldwide for insider perspectives on university life and academics.',
                    mentors: 32
                },
                'courses': {
                    title: 'Course & Program Guidance',
                    question: 'Confused about which program to choose?',
                    description: 'Ask mentors about MS vs MBA, specialized programs, curriculum details, career outcomes, or switching fields.',
                    advice: 'Our mentors have pursued diverse programs - from STEM to Business. Get advice on course selection aligned with your career goals.',
                    mentors: 24
                },
                'scholarships': {
                    title: 'Scholarships & Funding',
                    question: 'Looking for scholarship opportunities?',
                    description: 'Mentors who won scholarships share tips on finding opportunities, writing winning applications, and maximizing financial aid.',
                    advice: 'Learn from scholarship recipients about deadlines, application strategies, and lesser-known funding sources.',
                    mentors: 15
                },
                'accommodation': {
                    title: 'Housing & Accommodation',
                    question: 'Worried about finding housing abroad?',
                    description: 'Current students and alumni share tips on finding accommodation, navigating lease agreements, roommate searches, and budget-friendly living.',
                    advice: 'Get practical advice on housing markets, safe neighborhoods, and avoiding common rental pitfalls in different countries.',
                    mentors: 28
                },
                'gre': {
                    title: 'Test Preparation (GRE/IELTS/TOEFL)',
                    question: 'Need test prep strategies and resources?',
                    description: 'High scorers share study plans, resources, test-taking strategies, and tips to improve your scores.',
                    advice: 'Learn from students who scored 320+ on GRE, 8+ on IELTS, and 110+ on TOEFL about effective preparation methods.',
                    mentors: 21
                },
                'visa': {
                    title: 'Visa Application Support',
                    question: 'Visa application got you stressed?',
                    description: 'Mentors share their visa interview experiences, document preparation tips, and how to handle common visa officer questions.',
                    advice: 'Get insights on visa success stories, rejection reasons to avoid, and country-specific visa nuances.',
                    mentors: 19
                }
            };

            const content = mentorContent[topic] || mentorContent['eligibility'];

            // Update title
            const titleEl = document.getElementById('topicTitle');
            const badgeEl = document.getElementById('topicBadge');
            if (titleEl) titleEl.textContent = content.title;
            if (badgeEl) badgeEl.textContent = topic.toUpperCase();

            // Update mentor post
            const questionEl = document.getElementById('mentorQuestion');
            const descEl = document.getElementById('mentorDescription');
            const adviceEl = document.getElementById('mentorAdvice');
            const mentorsEl = document.getElementById('activeMentors');

            if (questionEl) questionEl.textContent = content.question;
            if (descEl) descEl.textContent = content.description;
            if (adviceEl) adviceEl.textContent = content.advice;
            if (mentorsEl) mentorsEl.textContent = content.mentors + ' Active Mentors';
        }

        // Show mentor info modal/alert
        function showMentorInfo() {
            alert('ðŸŽ“ Mentor-Only Reply Feature\n\n' +
                'This is a special post where only verified mentors and alumni can provide answers.\n\n' +
                'âœ… Mentors have:\n' +
                'â€¢ Verified student/alumni status\n' +
                'â€¢ Real experience with this topic\n' +
                'â€¢ Expert knowledge to share\n\n' +
                'ðŸ’¡ Post your question below and our mentors will respond with personalized guidance!\n\n' +
                'Want to become a mentor? Contact us at mentors@loanhero.com');
        }

        // Call on page load
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', updateMentorPostForTopic);
        } else {
            updateMentorPostForTopic();
        }
    </script>
    <script src="assets/js/community-forum.js"></script>
    <script src="assets/js/auth.js"></script>
    <script src="assets/js/components-loader.js"></script>
</body>

</html>